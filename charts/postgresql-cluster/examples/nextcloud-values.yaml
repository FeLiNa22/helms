# Example: PostgreSQL for Nextcloud
enabled: true

cluster:
  instances: 3

storage:
  size: 20Gi
  storageClass: ""

superuserSecret:
  create: true
  username: postgres
  password: ""  # Auto-generated

appSecret:
  create: true
  username: nextcloud
  password: ""  # Auto-generated

bootstrap:
  initdb:
    database: nextcloud
    owner: nextcloud

postgresql:
  parameters:
    max_connections: "200"
    shared_buffers: "512MB"
    effective_cache_size: "2GB"
    maintenance_work_mem: "128MB"
    work_mem: "2621kB"

resources:
  requests:
    cpu: 500m
    memory: 1Gi
  limits:
    cpu: 2000m
    memory: 4Gi

backup:
  enabled: true
  schedule: "0 2 * * *"
  retentionPolicy: "30d"

# Optional: Enable connection pooler for better performance
pooler:
  enabled: true
  instances: 2
  type: rw
  poolMode: transaction
  parameters:
    max_client_conn: "500"
    default_pool_size: "20"
